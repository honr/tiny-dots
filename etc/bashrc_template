# -*- Mode: Shell-Script -*-
SYSOSTYPE="$(uname)"
case "${SYSOSTYPE}" in
    Darwin)
	      SYSOSTYPE=mac
	      ;;
    Linux)
	      SYSOSTYPE=linux
	      ;;
esac
CPUARCH="$(uname -m)"
case "${CPUARCH}" in
    i*86)
	      CPUARCH=x86
	      ;;
esac
SYSARCH="${SYSOSTYPE}-${CPUARCH}"

if [ -z "${MY_BASHRC_LOADED}" ] ; then
    export PATH="$HOME/.local/bin/$SYSARCH:$HOME/.local/bin:$PATH"
    export MANPATH="$HOME/.local/share/man:$MANPATH"
    export PYTHONSTARTUP="$HOME/.local/etc/pythonrc"
    export ALTERNATE_EDITOR=""
    export VISUAL="emacsclient"
    export EDITOR="emacsclient"
    export MY_BASHRC_LOADED="t"
fi

[ -z "$PS1" ] && return
# Below is only for interactive sessions.

unset HISTFILESIZE
export HISTSIZE=16384
export HISTFILE=$HOME/.history/bash
export HISTCONTROL=ignoreboth
export PROMPT_COMMAND="history -a"
shopt -s histappend
shopt -s checkwinsize
export CLICOLOR=1

if [ -f /etc/bash_completion ] ; then
    . /etc/bash_completion
fi

# Place the rest of your customizations in `$HOME/.local/etc/bash/'.  For
# platform-specific settings append `.$SYSOSTYPE' to the file name, e.g.,
# `alias.linux'.  Files ending with `.bash' or `.sh' are for all platforms.
for file in "$HOME/.local/etc/bash"/*.{"$SYSOSTYPE",bash,sh} ; do
    if [ -r "$file" ] ; then
        source "$file"
    fi
done
